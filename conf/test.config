// ============================================================================
// Test Configuration for scRNA-seq Pipeline
// ============================================================================

params {
    // Use example samplesheet
    samplesheet = "${projectDir}/examples/samplesheet.tsv"

    // Reference files (should point to test data)
    fasta      = null  // Provide test FASTA
    annotation = null  // Provide test GTF

    // Test with smaller resource requirements
    run_mode = "all"

    // QC parameters - may use stricter filters for test
    min_genes_per_cell  = 100
    max_genes_per_cell  = null
    min_counts_per_cell = 200
    max_pct_mt          = 25
    min_cells_per_gene  = 2
    run_doublets        = false  // Disable doublet detection for speed

    // BBKNN parameters
    bbknn_neighbors_within_batch = 3
    leiden_resolution            = 0.8

    // Output
    outdir = "${launchDir}/results_test"
}

process {
    withName: SIMPLEAF_INDEX {
        cpus   = 2
        memory = 4.GB
        time   = 1.h
    }

    withName: SIMPLEAF_QUANT {
        cpus   = 4
        memory = 8.GB
        time   = 2.h
    }

    withName: SCANPY_QC {
        cpus   = 2
        memory = 4.GB
        time   = 30.m
    }

    withName: SCANPY_BBKNN {
        cpus   = 2
        memory = 8.GB
        time   = 1.h
    }
}

executor {
    name = 'local'
    queueSize = 2
}
